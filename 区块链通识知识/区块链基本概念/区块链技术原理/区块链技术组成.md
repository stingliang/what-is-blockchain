<!-- 
It is written by liangrui_ibilling,
email:liangrui_ibilling@si-tech.com
-->

## 区块链技术组成

### 区块链基础技术

区块链作为一个诞生刚到十年的技术，的确算是一个新兴的概念，但是它所用到的基础技术全是当前非常成熟的技术。区块链的基础技术如**哈希运算**、**数字签名**、**P2P网络**、**共识算法**以及**智能合约**等，在区块链兴起之前，很多技术已经在各种互联网应用中被广泛使用。但这并不意味着区块链就是一个新瓶装旧酒的东西。就好比积木游戏，虽然是一些简单有限的木块，但是组合过后，就能创造出一片新的世界。同时，区块链也并不是简单的重复使用现有技术，例如共识算法、隐私保护在区块链中已经有了很多的革新，智能合约也从一个简单的理念变成了一个现实。区块链“去中心化”或“多中心”这种颠覆性的设计思想，结合其数据不可篡改、透明、可追溯、合约自动执行等强大能力，足以掀起一股新的技术风暴。后面将逐一讲述这些区块链基础技术原理。

- 哈希运算（Hash）

  Hash，一般翻译做散列、杂凑，或音译为哈希，是把任意长度的输入（又叫做预映射pre-image）通过散列算法变换成固定长度的输出，该输出就是散列值。这种转换是一种压缩映射，也就是，散列值的空间通常远小于输入的空间，不同的输入可能会散列成相同的输出，所以不可能从散列值来确定唯一的输入值。简单的说就是一种将任意长度的消息压缩到某一固定长度的消息摘要的函数。（来自百度百科）

- 数字签名（digital signature）

  数字签名（又称公钥数字签名）是只有信息的发送者才能产生的别人无法伪造的一段数字串，这段数字串同时也是对信息的发送者发送信息真实性的一个有效证明。它是一种类似写在纸上的普通的物理签名，但是使用了公钥加密领域的技术来实现的，用于鉴别数字信息的方法。一套数字签名通常定义两种互补的运算，一个用于签名，另一个用于验证。数字签名是非对称密钥加密技术与数字摘要技术的应用。（来自百度百科）

- 共识算法

  所谓“共识机制”，是通过特殊节点的投票，在很短的时间内完成对交易的验证和确认；对一笔交易，如果利益不相干的若干个节点能够达成共识，我们就可以认为全网对此也能够达成共识。再通俗一点来讲，如果中国一名微博大V、美国一名虚拟币玩家、一名非洲留学生和一名欧洲旅行者互不相识，但他们都一致认为你是个好人，那么基本上就可以断定你这人还不坏。（来自百度百科）

  “共识算法“既是实现共识机制的算法。

- 智能合约（Smart contract）

  智能合约（英语：Smart contract ）是一种旨在以信息化方式传播、验证或执行合同的计算机协议。智能合约允许在没有第三方的情况下进行可信交易，这些交易可追踪且不可逆转。智能合约概念于1995年由Nick Szabo首次提出。
  智能合约的目的是提供优于传统合约的安全方法，并减少与合约相关的其他交易成本。（来自百度百科）

- P2P网络（Peer to Peer）

  对等网络，即对等计算机网络，是一种在对等者（Peer）之间分配任务和工作负载的分布式应用架构，是对等计算模型在应用层形成的一种组网或网络形式。“Peer”在英语里有“对等者、伙伴、对端”的意义。因此，从字面上，P2P可以理解为对等计算或对等网络。国内一些媒体将P2P翻译成“点对点”或者“端对端”，学术界则统一称为对等网络（Peer-to-peer networking）或对等计算（Peer-to-peer computing），其可以定义为：网络的参与者共享他们所拥有的一部分硬件资源（处理能力、存储能力、网络连接能力、打印机等），这些共享资源通过网络提供服务和内容，能被其它对等节点（Peer）直接访问而无需经过中间实体。在此网络中的参与者既是资源、服务和内容的提供者（Server），又是资源、服务和内容的获取者（Client）。

  在P2P网络环境中，彼此连接的多台计算机之间都处于对等的地位，各台计算机有相同的功能，无主从之分，一台计算机既可作为服务器，设定共享资源供网络中其他计算机所使用，又可以作为工作站，整个网络一般来说不依赖专用的集中服务器，也没有专用的工作站。网络中的每一台计算机既能充当网络服务的请求者，又对其它计算机的请求做出响应，提供资源、服务和内容。通常这些资源和服务包括：信息的共享和交换、计算资源（如CPU计算能力共享）、存储共享（如缓存和磁盘空间的使用）、网络共享、打印机共享等。（来自百度百科）

***

### 区块链技术趋势

#### 当前的区块链痛点

比特币诞生时还只是黑客的玩具，对其有了解的人还很少。随着比特币知名度的提高，越来越多的交易涌向比特币系统，其性能问题就凸显了出来：交易确认时间久，吞吐量低。比特币每10分钟出一个区块，区块最大为1MB，换算下来就是每秒钟可以处理的交易数是7笔，这与当前很多的金融系统相比实在太少。

吞吐量过低是比特币系统的严重问题，这会大大限制其可用场景。后来为数不少的公链项目都以改进性能为首要目标，或者增加区块大小，或者提高出块频率。在比特币的框架下，靠调整这类参数虽然可以一定程度上改善吞吐量，但其上限也就是每秒几百笔交易，很难有本质上的突破。而作为联盟链代表的HyperledgerFabric，其吞吐量也只有每秒几百到几千笔交易的量级，并不能满足当前金融系统对吞吐量（几万笔交易每秒）的需求。吞吐量过低的根因，其实在于共识过程。在一个完全去中心化的环境里，要得到多数节点认可，往往需要多次交互，而每次交互又均伴随着网络延迟，在此两者的共同影响下，区块链系统的吞吐量注定难以提高。

#### 技术发展方向

##### 异步共识

在共识协议里，主流的做法是每出一个块，所有节点之间要进行同步，共识通过以后再继续出下一个块。另有一类做法是出块以后无须立即达成共识，每个节点在遵循某种规则的前提下，尽最大的能力出块。如果规则制定得足够巧妙，各自为战的节点在经过一段时间之后，仍然可以达成一致。

##### 随机共识

全网所有节点参与共识效率较低，那么一个提高性能的直接想法就是用部分节点间的共识代替全网共识。然而，如何证明“部分”=“全部”呢？其实，这个证明并不存在。但是，“部分”能否极大程度地代表“全部”呢？这个其实有解决办法：如果“部分”是完全随机地从节点中抽取，在达到一定样本量时，统计学上是可以表达“全部”意义的。

##### 分区方案

区块链系统，单纯从数据存储的角度来看属于分布式日志数据库。那么，分布式日志数据库中用来提高性能的方案理应可以用于区块链系统。数据库的技术已经非常成熟，在处理大数据时，分区是不二选择。所以，区块链系统理应也可以分区。

##### 子链/侧链技术

一条链的区块链系统性能较差，那么一个直观的想法就是多链并行可以提高区块链系统的性能表现。闪电网络（LightingNetwork）是子链技术的代表：它指的是A和B两人用多重签名的方式冻结自己的比特币，然后进行链下交易，交易参与方可以随时关闭交易通道，关闭时的余额信息会写回比特币区块链。

##### 可信执行环境

如果某类节点的运行环境具备如下特征：要么不运行，一旦运行必然可靠，无法被外界做任何修改，那么这类环境便可称为可信执行环境。基于可信执行环境假设而设计的共识可以进行一定程度上的简化，因为不必考虑节点，可以任意篡改共识逻辑，也就是不必考虑拜占庭攻击，所以通常应用可信执行环境可以提高区块链的性能表现。

##### 隐形中心化

区块链界有一种说法：完全去中心化并无必要，受限制的中心化更贴合现实情况。具体来说，受限制的中心化可以是多个中心，也可以是中心节点轮换的形式。典型地，DPoS就是中心轮换的共识算法。EOS便采用了DPoS共识算法，其中的超级节点权力很大，已经有了中心化的特征，可以看作是区块链系统对于去中心化这一特性的妥协。